<h1>Comment / Save / Share</h1>


<div data-controller="toggle" class="mt-5">
  <button data-action="click->toggle#fire" class="btn btn-outline-primary">Write comment</button>


  <div data-toggle-target="togglableElement" class="d-none mt-3">
    <%= render "form", comment: @comment %>
  </div>
</div>

<div class="mt-3">
  <button id="share-button" class="btn btn-outline-primary mt-5" data-url="<%= recipe_url(@comment.recipe) %>">Share comment</button>
</div>

<script>
  const button = document.getElementById("share-button")
  button.addEventListener("click", function () {
    const message = `"Check out this recipe I just tried!" ${button.dataset.url}`;
    const whatsappURL = `https://api.whatsapp.com/send?text=${encodeURIComponent(message)}`;
    window.open(whatsappURL, "_blank");
  });
</script>
